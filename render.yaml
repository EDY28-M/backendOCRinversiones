# render.yaml â€” Blueprint de despliegue para Render.com
# Docs: https://render.com/docs/blueprint-spec
# =============================================================

services:
  - type: web
    name: backend-orc-inversiones
    runtime: docker
    dockerfilePath: ./Dockerfile
    # Render detecta automÃ¡ticamente el puerto desde ASPNETCORE_URLS
    # Pero tambiÃ©n lo puedes indicar explÃ­citamente:
    # port: 10000

    # Plan gratuito de Render (cambia a "standard" si necesitas mÃ¡s recursos)
    plan: free

    # RegiÃ³n (selecciona la mÃ¡s cercana a tu audiencia)
    region: oregon

    # Healthcheck â€” Render usa esto para saber si el servicio estÃ¡ listo
    healthCheckPath: /health/live

    # Variables de entorno â€” ConfigÃºralas en el dashboard de Render
    # Environment Variables > Add from .env or manually
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production

      - key: ASPNETCORE_URLS
        value: http://+:10000

      # ðŸ”´ ESTOS debes configurarlos manualmente en el dashboard de Render:
      - key: DATABASE_URL
        sync: false   # No sincronizar desde aquÃ­ â€” configura en el dashboard

      - key: JWT_KEY
        sync: false

      - key: JWT_ISSUER
        value: ORCInversionesAPI

      - key: JWT_AUDIENCE
        value: ORCInversionesClient

      - key: FRONTEND_URL
        sync: false   # Ej: https://frontedocrinversiones.onrender.com

      - key: CORS_ORIGINS
        sync: false   # Ej: https://frontedocrinversiones.onrender.com,https://orcinversionesperu.com

      - key: BREVO_API_KEY
        sync: false

      - key: SENDER_EMAIL
        sync: false

      - key: SENDER_NAME
        value: "ORC Inversiones PerÃº"

      - key: CONTACT_RECIPIENT_EMAIL
        sync: false
